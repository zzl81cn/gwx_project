## 浏览器如何工作

假设有两个定位元素，每个元素都有 position:absolute 和一个不同的 z-index。 浏览器将从 CPU 绘制它，然后将生成的图像发送到 GPU，最后将显示在屏幕上。

## left 属性和 CSS 动画(animation)执行

1. 对于每个动画帧，浏览器必须重新计算元素的几何形状（即重排），和渲染页面新状态下的图像（即重绘），然后再次发送到 GPU 将其显示在屏幕上。 2.每个现代浏览器都非常聪明地只重绘页面中改变的区域，而不是整个页面。 虽然浏览器在大多数情况下可以非常快速地重绘，但我们的动画仍然不够平滑。

## gpu 合成优化

1. 比较有效的方法是绘制两个单独的图像 —— 一个用于 A 元素，一个用于没有 A 元素的整个页面 —— 然后简单地让这些图片相对于彼此偏移,合成缓存元素的图像将会加速。

### 满足的 css 属性

- 要优化合成，浏览器必须确保动画的 CSS 属性:

  - 不影响文档流，

  * 不依赖于文档流，
  * 不会造成重绘。

- 大家可能会认为 absolute 和 fixed 的 top 和 left 属性不依赖于元素环境，但事实并非如此。例如，left 属性可以接收取决于定位父级大小的百分比值; 同样的，em，vh 和其他单位取决于他们的环境。 相反，transform 和 opacity 是唯一满足上述条件的 CSS 属性。

### 优势

- 我们可以通过亚像素精度得到一个运行在特殊优化过的单位图形任务上的平滑动画,并且运行非常快。
- 动画不再绑定到 CPU。 即使你运行一个非常复杂的 JavaScript 任务，动画仍然会很快运行。

### 缺点

1. 添加重绘，添加内存消耗

### 原理

- GPU 是一个单独的计算机 每个现代设备的一个重要部分实际上是一个独立的单元，有自己的处理器和自己的内存和数据处理模型。浏览器需要与 GPU 交谈

## [参考](https://www.w3cplus.com/animation/gpu-animation-doing-it-right.html)
