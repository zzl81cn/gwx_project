webpackJsonp([8],{F2CJ:function(t,e){},G5t8:function(t,e,n){"use strict";e.a=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){};Object(s.a)({api:"base_config_getOSSPolicyAndSignature",param:{}}).then(function(o){console.log(o,"上传的回调"),function(t,e,n,i,o){!function(t,e,n,i,o,s){var a=e.bucket,c=e.OSSAccessKeyId,l=e.policy,u=e.signature,d="jpg",f=t.name;f&&(f=function(t){if("string"==typeof t)return["s","+","(",")","（","）"].forEach(function(e){t=t.replace(new RegExp("\\"+e,"g"),"")}),t;return t}(f));var p=f.indexOf(".");if(p>0){var v=f.split(".");d=v[v.length-1]}var m={key:f.substring(0,p)+"_"+n+"."+d,OSSAccessKeyId:c,policy:l,signature:u,success_action_status:"201"},h=new FormData;for(var _ in m)h.append(_,m[_]);h.append("file",t);var g=new XMLHttpRequest;g.upload.onprogress=function(t){if("progress"===t.type){var e=Math.round(t.loaded/t.total*100,2);o&&o(e)}},g.onreadystatechange=function(){if(4===g.readyState)if(201===g.status){var t=g.responseText;console.log("服务器响应参数:"+t);var e=r(i,s);e(function(t){var e=void 0;if(window.DOMParser){var n=new DOMParser;e=n.parseFromString(t,"text/xml")}var i=e.getElementsByTagName("Bucket")[0].childNodes[0].nodeValue;return{url:e.getElementsByTagName("Location")[0].childNodes[0].nodeValue,Bucket:i,code:200,message:"sucess"}}(t))}else console.log("上传失败")},g.open("POST",a),g.send(h)}(t,e,function(){for(var t="abcdef0123456789",e=t.length,n="",i=0;i<3;i++)n+=t.charAt(Math.floor(Math.random()*e));return""+c()().format("YYYYMMDDHHmmss")+n}(),n,i,o)}(t,o,e,n,i)})};var i=n("mvHQ"),o=n.n(i),s=n("R01b"),a=n("PJh5"),c=n.n(a);var r=function(t,e){return function(n){try{200===n.code?t(n.url):void 0===e||e(n.msg)}catch(t){console.log("uploadOSSApi 服务器返回结果发生错误="+o()(n)),void 0!==e&&e({code:"505",msg:"返回值json解析错误："+t+",服务器返回结果："+n})}}}},HGOJ:function(t,e){},Un7H:function(t,e){},exGp:function(t,e,n){"use strict";e.__esModule=!0;var i,o=n("//Fk"),s=(i=o)&&i.__esModule?i:{default:i};e.default=function(t){return function(){var e=t.apply(this,arguments);return new s.default(function(t,n){return function i(o,a){try{var c=e[o](a),r=c.value}catch(t){return void n(t)}if(!c.done)return s.default.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})}}},g8EE:function(t,e,n){"use strict";e.c=function(t,e,n){if(t){var i=[],o=function(t,e,n){for(var i=[],o=t.length,s=0,a=0;s<o;s++)"\n"!==t[s]&&"\r"!==t[s]&&s!==o-1||(i.push(t.substr(a,s)),a=s);return i}(t);return o.forEach(function(t){i.push(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments[2];n=n||'style="text-indent: 2em; margin: 10px 0;"';for(var i="",o=Math.ceil(t.length/e),s=0;s<o;s++)i+=t.substring(s*e,(s+1)*e)+"<br/>";return"<p "+n+">"+i+"</p>"}(t,e,n))}),i.join("")}return""},e.b=function(t,e){var n=document.createRange();n.selectNode(t);var i=window.getSelection();i.rangeCount>0&&i.removeAllRanges();i.addRange(n),document.execCommand("copy"),i.removeAllRanges(),e&&e()},e.a=function(t){var e=document.createElement("input");e.setAttribute("value",t),document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},rfCE:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("mvHQ"),o=n.n(i),s=n("Xxa5"),a=n.n(s),c=n("exGp"),r=n.n(c),l=n("G5t8"),u=(Boolean,Boolean,String,{name:"uploadButton",props:{isImage:{type:Boolean,default:!1},isShowPesent:{type:Boolean,default:!1},text:{type:String,default:"点击上传"}},data:function(){return{filePath:"",fileList:[],copyFile:""}},methods:{progress:function(t){var e=this;this.fileList[this.fileList.length-1].percent=t,100===t&&setTimeout(function(){e.fileList[e.fileList.length-1].isComplate=!0},500),this.$refs.file.value=null},onFileCopyClick:function(t){this.$refs.input.value=this.fileList[t].filePath,this.$refs.input.focus(),document.execCommand("copy")&&(this.$refs.input.select(),document.execCommand("copy"),this.$message({message:"复制链接成功",type:"success"}))},onCloseFileClick:function(t){this.fileList.splice(t,1)},onUploadClick:function(){this.$refs.file.click()},onFileChange:function(t){var e=this,n=t.target.files[0];void 0!==n&&(this.fileList.push({name:n.name,id:1e3*Math.random(),isActive:!0,percent:0,isComplate:!1,filePath:""}),Object(l.a)(n,function(t){e.fileList[e.fileList.length-1].filePath=t},this.progress))}}}),d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload"},[n("div",{staticClass:"upload__button"},[n("div",{staticClass:"button__text",on:{click:t.onUploadClick}},[t._v(t._s(t.text))]),t._v(" "),n("input",{ref:"file",staticClass:"button__file",attrs:{type:"file"},on:{change:t.onFileChange}})]),t._v(" "),n("div",{staticClass:"upload__result"},[n("transition-group",{attrs:{name:"list"}},t._l(t.fileList,function(e,i){return n("div",{key:e.id,staticClass:"result__item"},[n("div",{staticClass:"item__main"},[n("div",{staticClass:"item__icon"},[n("i",{staticClass:"el-icon-document"})]),t._v(" "),n("div",{staticClass:"item__name",on:{click:function(e){t.onFileCopyClick(i)}}},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),0===e.percent||e.isComplate?n("div",{staticClass:"item__close",on:{click:function(e){t.onCloseFileClick(i)}}},[n("i",{staticClass:"el-icon-close"})]):n("div",{staticClass:"item__percent"},[t._v(" "+t._s(e.percent)+" %")])]),t._v(" "),0===e.percent||e.isComplate?t._e():n("div",{staticClass:"item__progress",style:{width:e.percent+"%"}})])}))],1),t._v(" "),n("input",{ref:"input",staticClass:"upload__copy",attrs:{type:"text"},domProps:{value:t.copyFile}}),t._v(" "),t.isImage?n("img",{attrs:{src:t.filePath}}):t._e()])},staticRenderFns:[]};var f=n("VU/8")(u,d,!1,function(t){n("F2CJ")},"data-v-02ddc62f",null).exports,p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tabbar"},[n("div",{staticClass:"tabbar__wrap"},t._l(t.list,function(e,i){return n("div",{key:i,staticClass:"tabbar__item",class:{"tabbar__item--selected":i===t.ind},on:{click:function(e){t.onTabbarClick(i)}}},[t._v("\n      "+t._s(e)+"\n    ")])})),t._v(" "),n("div",{staticClass:"tabbar__line",style:{border:"1px solid red",width:100/t.list.length+"%",left:t.ind*(100/t.list.length)+"%"}})])},staticRenderFns:[]};var v=n("VU/8")({name:"",data:function(){return{list:["一号","二号"],ind:0}},methods:{onTabbarClick:function(t){this.ind=t}}},p,!1,function(t){n("HGOJ")},"data-v-311148ce",null).exports,m=n("g8EE"),h={name:"async",components:{upload:f,tabbar:v},data:function(){return{asyncFn:function(){},studentList:[],value:12,text:"这是需要复制的文字"}},mounted:function(){this.onCopyClick()},methods:{onCopyInputClick:function(){Object(m.a)("i am copy value")},onFontClick:function(){console.log("big");var t=document.getElementById("change");console.log(t.contentDocument,t.contentWindow)},onCopyClick:function(){Object(m.b)(this.$refs.copy,function(){console.log("复制完成")})},onTagClick:function(t){console.log(t),t.value=9999,t.focus(),t.select(),document.execCommand("copy")},reFindStudent:function(){return this.$callApi({api:"user_user_listIdentity",params:{campusid:1615,openid:"oD7tauP-p8_u-FgpipjwleMBorKA",userid:"1047184"}})},step2:function(){console.log("开始执行step2"),this.reFindStudent().then(function(){console.log("step2执行结束")})},onCreateAsyncClick:function(){var t,e=(t=r()(a.a.mark(function t(){var e=this;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.reFindStudent().then(function(t){e.studentList=t,console.log("step1执行结束")});case 2:return t.next=4,this.step2();case 4:return t.abrupt("return",this.studentList);case 5:case"end":return t.stop()}},t,this)})),function(){return t.apply(this,arguments)});this.asyncFn=e},onExecuteClick:function(){this.asyncFn().then(function(t){console.log("最终结果 : "+o()(t))})}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"async"},[n("tabbar"),t._v(" "),n("div",{on:{click:t.onCreateAsyncClick}},[t._v("create generator")]),t._v(" "),n("div",[t._v("execute")]),t._v(" "),n("input",{ref:"“input”",attrs:{type:"text"},domProps:{value:t.value},on:{click:function(e){t.onTagClick(e.target)}}}),t._v(" "),n("upload"),t._v(" "),n("div",{ref:"copy",on:{click:t.onCopyClick}},[t._v(t._s(t.text))]),t._v(" "),n("div",{on:{click:t.onCopyInputClick}},[t._v("input 复制")])],1)},staticRenderFns:[]};var g=n("VU/8")(h,_,!1,function(t){n("Un7H")},"data-v-1cc0c485",null);e.default=g.exports}});
//# sourceMappingURL=8.bbe0cee788541a242ac5.js.map