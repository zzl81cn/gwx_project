webpackJsonp([17],{"/eiQ":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("G5t8"),o={name:"axios",data:function(){return{isShowPesent:!1,showpesent:"",filePath:""}},methods:{progress:function(e){this.showpesent=e,this.isShowPesent=!0},reFindFirst:function(){this.$callApi({api:"get_first_data",param:{campusid:100,gradeCode:1152}})},reFindCount:function(){this.$callApi({api:"oa_resource_findResource",param:{campusid:1615,pageIndex:1,pageSize:20,processtype:1004,likename:""}})},onFileChange:function(e){var n=this,t=e.target.files[0];Object(a.a)(t,function(e){n.filePath=e},this.progress)}},created:function(){this.reFindCount()}},s={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  asdfsdfs\n  ")])},staticRenderFns:[]};var r=t("VU/8")(o,s,!1,function(e){t("PmCH")},"data-v-760165c0",null);n.default=r.exports},G5t8:function(e,n,t){"use strict";n.a=function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){};Object(s.a)({api:"base_config_getOSSPolicyAndSignature",param:{}}).then(function(o){console.log(o,"上传的回调"),function(e,n,t,a,o){!function(e,n,t,a,o,s){var r=n.bucket,i=n.OSSAccessKeyId,u=n.policy,d=n.signature,f="jpg",l=e.name;l&&(l=function(e){if("string"==typeof e)return["s","+","(",")","（","）"].forEach(function(n){e=e.replace(new RegExp("\\"+n,"g"),"")}),e;return e}(l));var p=l.indexOf(".");if(p>0){var g=l.split(".");f=g[g.length-1]}var h={key:l.substring(0,p)+"_"+t+"."+f,OSSAccessKeyId:i,policy:u,signature:d,success_action_status:"201"},v=new FormData;for(var m in h)v.append(m,h[m]);v.append("file",e);var y=new XMLHttpRequest;y.upload.onprogress=function(e){if("progress"===e.type){var n=Math.round(e.loaded/e.total*100,2);o&&o(n)}},y.onreadystatechange=function(){if(4===y.readyState)if(201===y.status){var e=y.responseText;console.log("服务器响应参数:"+e);var n=c(a,s);n(function(e){var n=void 0;if(window.DOMParser){var t=new DOMParser;n=t.parseFromString(e,"text/xml")}var a=n.getElementsByTagName("Bucket")[0].childNodes[0].nodeValue;return{url:n.getElementsByTagName("Location")[0].childNodes[0].nodeValue,Bucket:a,code:200,message:"sucess"}}(e))}else console.log("上传失败")},y.open("POST",r),y.send(v)}(e,n,function(){for(var e="abcdef0123456789",n=e.length,t="",a=0;a<3;a++)t+=e.charAt(Math.floor(Math.random()*n));return""+i()().format("YYYYMMDDHHmmss")+t}(),t,a,o)}(e,o,n,t,a)})};var a=t("mvHQ"),o=t.n(a),s=t("R01b"),r=t("PJh5"),i=t.n(r);var c=function(e,n){return function(t){try{200===t.code?e(t.url):void 0===n||n(t.msg)}catch(e){console.log("uploadOSSApi 服务器返回结果发生错误="+o()(t)),void 0!==n&&n({code:"505",msg:"返回值json解析错误："+e+",服务器返回结果："+t})}}}},PmCH:function(e,n){}});
//# sourceMappingURL=17.63e113876af5b2f2351c.js.map