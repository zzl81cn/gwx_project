{"version":3,"sources":["webpack:///./src/page/modules/designPatterns/proxy/shoes.js","webpack:///./src/page/modules/designPatterns/proxy/assistant.js","webpack:///./src/page/modules/designPatterns/proxy/ad.js","webpack:///./src/page/modules/designPatterns/proxy/cache.js","webpack:///./src/page/modules/designPatterns/proxy/example/flower.js","webpack:///./src/page/modules/designPatterns/proxy/example/loading.js","webpack:///./src/page/modules/designPatterns/proxy/example/http.js","webpack:///./src/page/modules/designPatterns/proxy/index.vue","webpack:///./src/page/modules/designPatterns/proxy/index.vue?d8d3","webpack:///./src/page/modules/designPatterns/proxy/index.vue?fda6"],"names":["Shoes","name","classCallCheck_default","this","shoes","Assistant","Star","buyShoes","getShoes","assistant","purchasing","time","Date","getHours","doBusiness","proxy_assistant","Advert","price","reject","resolve","getAdvert","ad","init","ProxyCache","cache","result","_len","arguments","length","list","Array","_key","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","item","value","err","return","console","log","_len2","_key2","paramsString","join","apply_default","getAddResult","Flower","flower","_this","girl","Girl","listenGoodMood","receiveFlower","fn","setTimeout","DefaultImage","imgNode","Image","document","body","appendChild","PreImage","img","onload","src","ProxyHttp","cacheList","id","push","timer","syncFile","clearTimeout","modules_designPatterns_proxy","data","Cache","ProxyImage","methods","created","proxy","HttpProxy","proxyFile","page_modules_designPatterns_proxy","render","_h","$createElement","_self","_c","staticClass","_v","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.af642b881bcc6b000957.js","sourcesContent":["// 鞋店\nclass Shoes {\n  // 告诉它你需要的鞋子\n  constructor(name) {\n    // 生产一双你需要是鞋子\n    this.shoes = name\n  }\n  // 通过 这个方法得到我们定制的鞋子\n  getShoes() {\n    return this.shoes\n  }\n}\n// 雇佣一个代理人\nclass Assistant {\n  // 他有一个能力就是给Star代购一双需要的鞋子\n  // 首先这个star需要一个buyShoes的行为,才需要去执行代购\n  /**\n   * 代购的过程就是 :\n   * 1. Assistant类执行purchasing方法\n   * 2. 方法中实例一个 Star 并执行star中买鞋子的方法\n   * 3. 通过传入一个实例化的Shoes并执行getShoes方法 返回一个鞋子\n   */\n  purchasing(Shoes) {\n    return new Star().buyShoes(Shoes.getShoes())\n  }\n}\n\nclass Star {\n  buyShoes(name) {\n    // console.log('买到一双' + name);\n    return '买到一双' + name\n  }\n}\nconst assistant = new Assistant().purchasing(new Shoes('球鞋'))\nexport default assistant\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/shoes.js","class Shoes {\n  constructor(name) {\n    this.shoes = name\n  }\n  getShoes() {\n    return this.shoes\n  }\n  // 对应getShoes做限制,规定营业时间\n  doBusiness() {\n    const time = new Date().getHours()\n    if (time > 8 && time < 20) {\n      return '订购了一双' + this.getShoes()\n    } else {\n      return '非营业时间'\n    }\n  }\n}\nclass Assistant {\n  purchasing(name) {\n    return new Star().buyShoes(new Shoes(name).doBusiness())\n  }\n}\nclass Star {\n  buyShoes(name) {\n    return name\n  }\n}\nexport default new Assistant().purchasing('雨鞋')\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/assistant.js","// 工厂模式\nclass Advert {\n  getAdvert (price) {\n    if (price > 10000) {\n      return '超级大的生意'\n    }\n    if (price > 1000) {\n      return '千元广告'\n    }\n    if (price > 100) {\n      return '百元广告'\n    }\n  }\n}\n// 代理类 将明星类需要的结果处理好传给对应的函数 这个过程涉及到实例化代理的事件类\nclass Assistant {\n  init(price) {\n    if (price < 50) {\n      return new Star().reject()\n    } else {\n      return new Star().resolve(new Advert().getAdvert(price))\n    }\n  }\n}\n// 明星类 只需要传入价格返回对应的值即可,逻辑层不用考虑\nclass Star {\n  // 定义失败的返回值\n  reject() {\n    return '不接50元以下的单子'\n  }\n  // 定义成功的返回值\n  resolve(price) {\n    return '接了一个' + price + '的单子'\n  }\n}\n\nexport default new Assistant().init(15000)\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/ad.js","class ProxyCache {\r\n  constructor() {\r\n    // 用于存放缓存\r\n    this.cache = {}\r\n    // 存放计算结果\r\n    this.result = 0\r\n  }\r\n  // ...list 来\r\n  getAddResult(...list) {\r\n    for (let item of list) {\r\n      this.result += item\r\n    }\r\n    return this.result\r\n  }\r\n  proxyAdd(...list) {\r\n    console.log(this.cache, 'cache')\r\n    const paramsString = list.join()\r\n    if (paramsString in this.cache) {\r\n      return this.cache[paramsString]\r\n    }\r\n    this.cache[paramsString] =\r\n    Reflect.apply(this.getAddResult, this, list)\r\n    return this.cache[paramsString]\r\n  }\r\n}\r\nexport default ProxyCache\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/cache.js","class Flower {\n  constructor(name) {\n    this.flower = name\n  }\n  friend() {\n    // 保护代理 : friend 可以帮助 confessioner 过滤掉一些请求，比如送花的人中年龄太大的或者没有宝马的，这种请求就可以直接在代理 friend 处被拒绝掉\n\n    // 虚拟代理 new Flower 也是一个代价昂贵的操作， 那么我们可以把 new Flower 的操作交给代理 B 去执行，代理 B 会选择在 A 心情好时再执行 new Flower\n    const girl = new Girl()\n    const handler = () => {\n      girl.receiveFlower(this.flower)\n    }\n    girl.listenGoodMood(handler)\n  }\n  confessioner() {\n    const girl = new Girl()\n    girl.receiveFlower(this.flower)\n  }\n}\n\nclass Girl {\n  receiveFlower(flower) {\n    console.log('收到' + flower + '啦!');\n  }\n  listenGoodMood(fn) {\n    setTimeout(() => {\n      fn()\n    }, 1000)\n  }\n}\nexport default Flower\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/example/flower.js","\nclass DefaultImage {\n  constructor() {\n    this.imgNode = new Image()\n    document.body.appendChild(this.imgNode);\n  }\n}\nclass PreImage {\n  constructor() {\n    // this.imgNode = new Image()\n    // document.body.appendChild(this.imgNode);\n    this.DefaultImage = new DefaultImage()\n    this.img = new Image()\n    // 当目标图片加载完 模拟图片加载时间\n    // 使用箭头函数 因为会用到父级this否则拿到的还是函数中的this\n    this.img.onload = () => {\n      setTimeout(() => {\n        this.DefaultImage.imgNode.src = this.img.src\n      }, 1000);\n    }\n  }\n  setSrc(src) {\n    // 设置图片默认地址\n    this.DefaultImage.imgNode.src = './loading.gif'\n    // 设置传入图片\n    this.img.src = src;\n  }\n}\n\nexport default PreImage\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/example/loading.js","// 防抖\nclass ProxyHttp {\n   cacheList = []\n   timer\n   syncFile(id) {\n     console.log('开始同步文件 id为:' + id);\n   }\n   proxyFile(id) {\n     // 可以不断添加id进来\n     this.cacheList.push(id)\n     // 两秒内只生成一个定时器执行\n     if (this.timer) {\n       return\n     }\n     console.log(this.timer, 'start');\n     this.timer = setTimeout(() => {\n       // 将两秒内收集到的统一指向同步文件\n       this.syncFile(this.cacheList.join())\n\n       // 并且清除定时器初始化\n       clearTimeout(this.timer)\n       this.timer = null\n       this.cacheList.length = []\n     }, 2000)\n     console.log(this.timer, 'end');\n   }\n}\nexport default ProxyHttp\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/example/http.js","//\n//\n//\n//\n//\n//\n\r\nimport shoes from './shoes.js'\r\nimport assistant from './assistant.js'\r\nimport ad from './ad.js'\r\nimport Cache from './cache.js'\r\nimport Flower from './example/flower.js'\r\nimport ProxyImage from './example/loading.js'\r\nimport HttpProxy from './example/http.js'\r\nexport default {\r\n  name: 'proxy',\r\n\r\n  data() {\r\n    return {\r\n      shoes,\r\n      assistant,\r\n      ad,\r\n      Cache,\r\n      Flower,\r\n      ProxyImage\r\n      // http\r\n    }\r\n  },\r\n\r\n  methods: {},\r\n  created() {\r\n    const proxy = new HttpProxy()\r\n    proxy.proxyFile(123)\r\n    proxy.proxyFile(123456)\r\n    proxy.proxyFile(123456789)\r\n    setTimeout(() => {\r\n      proxy.proxyFile(123210)\r\n    }, 500)\r\n    // new Flower('百合').friend()\r\n    // const image = new ProxyImage()\r\n    // image.setSrc(\r\n    //   'https://user-gold-cdn.xitu.io/2018/12/19/167c7004b54a9e91?w=471&h=369&f=gif&s=199605'\r\n    // )\r\n    // console.log(flower)\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/modules/designPatterns/proxy/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"proxy\"},[_vm._v(\"\\n  proxy\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d028f468\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/page/modules/designPatterns/proxy/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d028f468\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../../node_modules/vux-loader/src/style-loader.js!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../../node_modules/vux-loader/src/script-loader.js!../../../../../node_modules/vux-loader/src/script-loader.js!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../../node_modules/vux-loader/src/script-loader.js!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d028f468\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../../node_modules/vux-loader/src/template-loader.js!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/modules/designPatterns/proxy/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}